<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Neural Architecture Search &mdash; Intel® Neural Compressor 2.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Intel® Neural Compressor
          </a>
            <div class="version">
              <a href="../../../versions.html">2.1▼</a>
              <p>Click link above to switch version</p>
            </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_guide.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples_readme.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-doc/apis.html">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases_info.html">Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="legal_information.html">Legal Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="SECURITY.html">Security Policy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/neural-compressor">Repo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Intel® Neural Compressor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Neural Architecture Search</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/source/NAS.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="neural-architecture-search">
<h1>Neural Architecture Search<a class="headerlink" href="#neural-architecture-search" title="Permalink to this heading"></a></h1>
<ol>
<li><p><a class="reference external" href="#introduction">Introduction</a></p>
<p>1.1. <a class="reference external" href="#basic-nas">Basic NAS</a></p>
<p>1.2. <a class="reference external" href="#dynamic-nas">Dynamic NAS</a></p>
</li>
<li><p><a class="reference external" href="#nas-support-matrix">NAS Support Matrix</a></p></li>
<li><p><a class="reference external" href="#get-started-with-nas-api">Get Started with NAS API</a></p>
<p>3.1. <a class="reference external" href="#basic-usage">Basic Usage</a></p>
<p>3.2. <a class="reference external" href="#advanced-usage-custom-nas">Advanced Usage (Custom NAS)</a></p>
</li>
<li><p><a class="reference external" href="#examples">Examples</a></p></li>
</ol>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>Neural Architecture Search (NAS) is the process of automating the design of artificial neural networks (ANN) architecture. NAS has been used to design networks that are on par with or outperform hand-designed architectures. Intel® Neural Compressor has supported two different NAS methods: Basic NAS and Dynamic NAS.</p>
<section id="basic-nas">
<h3>Basic NAS<a class="headerlink" href="#basic-nas" title="Permalink to this heading"></a></h3>
<p>Our Basic NAS method leverages a specific search algorithm from built-in search algorithms (grid search, random search and bayesian optimization are supported in Intel® Neural Compressor now) or user defined search algorithms to propose the model architecture based on the given search space, then perform the train evaluation process to evaluate the potential of the proposed model architecture, after several iterations of such procedure, best performing model architectures which lie in pareto front will be returned.</p>
</section>
<section id="dynamic-nas">
<h3>Dynamic NAS<a class="headerlink" href="#dynamic-nas" title="Permalink to this heading"></a></h3>
<p>Dynamic Neural Architecture Search (DyNAS) is a super-network-based NAS approach which use the metric predictors for predicting the metrics of the model architecture, it is &gt;4x more sample efficient than typical one-shot predictor-based NAS approaches.
<br>
The flow of the DyNAS approach is shown in the following figure. In the first phase of the search, a small population of sub-networks are randomly sampled from the super-network and evaluated (validation measurement) to provide the initial training set for the inner predictor loop. After the predictors are trained, a multi-objective evolutionary search is performed in the predictor objective space. After this extensive search is performed, the best performing sub-network configurations are selected to be the next iteration’s validation population. The cycle continues until the search concludes when the user defined evaluation count is met.
<br>
<img alt="DyNAS Workflow" src="../../_images/dynas.png" /></p>
</section>
</section>
<section id="nas-support-matrix">
<h2>NAS Support Matrix<a class="headerlink" href="#nas-support-matrix" title="Permalink to this heading"></a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th>NAS Algorithm</th>
<th style="text-align: center;">PyTorch</th>
<th style="text-align: center;">TensorFlow</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basic NAS</td>
<td style="text-align: center;">&#10004;</td>
<td style="text-align: center;">Not supported yet</td>
</tr>
<tr>
<td>Dynamic NAS</td>
<td style="text-align: center;">&#10004;</td>
<td style="text-align: center;">Not supported yet</td>
</tr>
</tbody>
</table></section>
<section id="get-started-with-nas-api">
<h2>Get Started with NAS API<a class="headerlink" href="#get-started-with-nas-api" title="Permalink to this heading"></a></h2>
<section id="basic-usage">
<h3>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading"></a></h3>
<section id="python-code-yaml">
<h4>1. Python code + YAML<a class="headerlink" href="#python-code-yaml" title="Permalink to this heading"></a></h4>
<p>Simplest launcher code if NAS configuration is defined in user-defined yaml.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neural_compressor.experimental</span> <span class="kn">import</span> <span class="n">NAS</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">NAS</span><span class="p">(</span><span class="s1">&#39;/path/to/user/yaml&#39;</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">search</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="python-code-only">
<h4>2. Python code only<a class="headerlink" href="#python-code-only" title="Permalink to this heading"></a></h4>
<p>NAS class also support <code class="docutils literal notranslate"><span class="pre">NASConfig</span></code> class as it’s argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neural_compressor.conf.config</span> <span class="kn">import</span> <span class="n">NASConfig</span>
<span class="kn">from</span> <span class="nn">neural_compressor.experimental</span> <span class="kn">import</span> <span class="n">NAS</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">NASConfig</span><span class="p">(</span><span class="n">approach</span><span class="o">=</span><span class="s1">&#39;dynas&#39;</span><span class="p">,</span> <span class="n">search_algorithm</span><span class="o">=</span><span class="s1">&#39;nsga2&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">supernet</span> <span class="o">=</span> <span class="s1">&#39;ofa_mbv3_d234_e346_k357_w1.2&#39;</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;acc&#39;</span><span class="p">,</span> <span class="s1">&#39;macs&#39;</span><span class="p">]</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">num_evals</span> <span class="o">=</span> <span class="mi">250</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">results_csv_path</span> <span class="o">=</span> <span class="s1">&#39;search_results.csv&#39;</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="mi">64</span>
<span class="n">config</span><span class="o">.</span><span class="n">dynas</span><span class="o">.</span><span class="n">dataset_path</span> <span class="o">=</span> <span class="s1">&#39;/datasets/imagenet-ilsvrc2012&#39;</span> <span class="c1">#example</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">NAS</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">search</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-usage-custom-nas">
<h3>Advanced Usage (Custom NAS)<a class="headerlink" href="#advanced-usage-custom-nas" title="Permalink to this heading"></a></h3>
<p>Intel® Neural Compressor NAS API is defined under <code class="docutils literal notranslate"><span class="pre">neural_compressor.experimental.nas</span></code>, which takes a user defined yaml file or a <a class="reference external" href="../../neural_compressor/conf/config.py#NASConfig">NASConfig</a> object as input. The user defined yaml or the <a class="reference external" href="../../neural_compressor/conf/config.py#NASConfig">NASConfig</a> object defines necessary configuration of the NAS process. The <a class="reference external" href="../../neural_compressor/experimental/nas/nas.py#NAS">NAS</a> class aims to create an object according to the defined NAS approach in the configuration, please note this NAS approach should be registered in the Intel® Neural Compressor.</p>
<p>Currently, Intel® Neural Compressor supported two built-in NAS methods: <a class="reference external" href="../../neural_compressor/experimental/nas/basic_nas.py#BasicNAS">Basic NAS</a> and <a class="reference external" href="../../neural_compressor/experimental/nas/dynas.py#DyNAS">Dynamic NAS</a>. Both methods are inherited from a base class called <a class="reference external" href="../../neural_compressor/experimental/nas/nas.py#NASBase">NASBase</a>. User can also customize their own NAS approach in Intel® Neural Compressor just by decorating their NAS approach class with function <a class="reference external" href="../../neural_compressor/experimental/nas/nas_utils.py#nas_registry">nas_registry</a> as well as following the API in <a class="reference external" href="../../neural_compressor/experimental/nas/nas.py#NASBase">NASBase</a>, like the way used in the two built-in NAS methods.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<p>Following examples are supported in Intel® Neural Compressor:</p>
<ul class="simple">
<li><p>DyNAS MobileNetV3 supernet Example:</p>
<ul>
<li><p><a class="reference external" href="../../examples/notebook/dynas/MobileNetV3_Supernet_NAS.ipynb">DyNAS MobileNetV3 supernet Example</a>: DyNAS with MobileNetV3 supernet on ImageNet dataset.</p></li>
</ul>
</li>
<li><p>DyNAS Transformer LT supernet Example:</p>
<ul>
<li><p><a class="reference external" href="../../examples/notebook/dynas/Transformer_LT_Supernet_NAS.ipynb">DyNAS Transformer LT supernet Example</a>: DyNAS with Transformer LT supernet on WMT En-De dataset.</p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Intel® Neural Compressor, Intel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>